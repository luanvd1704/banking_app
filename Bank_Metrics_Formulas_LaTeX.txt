================================================================================
TÃ€I LIá»†U CÃ”NG THá»¨C TÃNH TOÃN 11 CHá»ˆ Sá» TÃ€I CHÃNH NGÃ‚N HÃ€NG
Banking Financial Metrics - Detailed LaTeX Formulas
================================================================================

Author: Banking Analysis System
Date: 2025-12-18
Purpose: TÃ i liá»‡u chi tiáº¿t cÃ´ng thá»©c Ä‘á»ƒ kiá»ƒm tra láº¡i sá»‘ liá»‡u trong Excel

================================================================================
PHáº¦N 1: THÃ”NG TIN CHUNG
================================================================================

1.1. NGUá»’N Dá»® LIá»†U
------------------
- API: vnstock library (VCI source)
- Táº§n suáº¥t: Quarterly (Theo QuÃ½)
- Sá»‘ quarters: 8 quarters gáº§n nháº¥t
- 17 ngÃ¢n hÃ ng: VCB, TCB, MBB, ACB, VPB, BID, CTG, STB, HDB, TPB, VIB, SSB, SHB, MSB, LPB, OCB, EIB

1.2. Cáº¤U TRÃšC Dá»® LIá»†U
---------------------
- File output: data/bank_financials.xlsx
- Format: 17 sheets, má»—i sheet lÃ  1 ngÃ¢n hÃ ng
- Columns: year, quarter, roa, nim, credit_cost, net_profit_yoy, loan_growth,
           operating_income_yoy, cir, equity_assets, ldr, fee_ratio, ocf_net_profit

1.3. CÃCH Tá»” CHá»¨C Dá»® LIá»†U
-------------------------
- yearReport: NÄƒm (VD: 2024)
- lengthReport: Quarter (1, 2, 3, 4)
- Dá»¯ liá»‡u sáº¯p xáº¿p: Descending theo (year, quarter)
  â†’ DÃ²ng Ä‘áº§u tiÃªn lÃ  quarter gáº§n nháº¥t

1.4. ANNUALIZATION (HÃ“A HÃ€NG NÄ‚M)
---------------------------------
- Quarterly data Ä‘Æ°á»£c NHÃ‚N 4 Ä‘á»ƒ chuyá»ƒn thÃ nh annualized rate
- Ãp dá»¥ng cho: ROA, NIM, Credit Cost (cÃ¡c chá»‰ sá»‘ theo % nÄƒm)
- KHÃ”NG Ã¡p dá»¥ng cho: Ratios tá»©c thá»i (Equity/Assets, LDR, CIR, Fee Ratio)

================================================================================
PHáº¦N 2: 11 CHá»ˆ Sá» TÃ€I CHÃNH - CÃ”NG THá»¨C CHI TIáº¾T
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 1: PROFITABILITY (KHÃA Cáº NH Lá»¢I NHUáº¬N) - 2 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ROA (Return on Assets) - Tá»· Suáº¥t Sinh Lá»i TrÃªn TÃ i Sáº£n               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng hiá»‡u quáº£ sinh lá»i trÃªn tá»•ng tÃ i sáº£n

â€¢ CÃ´ng thá»©c LaTeX:
$$
ROA = \frac{\text{Net Profit}}{\text{Total Assets}} \times 4 \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Net Profit: "Net Profit For the Year" (tá»« Income Statement)
  - Total Assets: "TOTAL ASSETS (Bn. VND)" (tá»« Balance Sheet)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Net Profit For the Year: Lá»£i nhuáº­n sau thuáº¿ trong quÃ½ (VD: Q1 2024)
  2. Total Assets: Tá»•ng tÃ i sáº£n cuá»‘i quÃ½ (VD: 31/03/2024)
  3. Chia lá»£i nhuáº­n cho tÃ i sáº£n â†’ tá»· lá»‡ %
  4. NhÃ¢n 4: Annualize tá»« quarterly sang yearly
  5. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm hÃ ng nÄƒm)

â€¢ Direction: Higher is better (CÃ ng cao cÃ ng tá»‘t)

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Quarterly â†’ Annualized
  - TÃ­nh theo tá»«ng quÃ½ riÃªng láº»
  - KhÃ´ng cáº§n dá»¯ liá»‡u quÃ½ trÆ°á»›c

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input:
    Net Profit Q1 2024 = 5,000 tá»· VND
    Total Assets Q1 2024 = 800,000 tá»· VND

  Calculation:
    ROA = (5,000 / 800,000) Ã— 4 Ã— 100
        = 0.00625 Ã— 4 Ã— 100
        = 0.025 Ã— 100
        = 2.5%

â€¢ Code Python (tham kháº£o):
```python
roa = (net_profit / total_assets * 4 * 100).round(2)
```


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. NIM (Net Interest Margin) - Tá»· Suáº¥t LÃ£i RÃ²ng                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng lá»£i nhuáº­n tá»« hoáº¡t Ä‘á»™ng cho vay so vá»›i tÃ i sáº£n sinh lá»i

â€¢ CÃ´ng thá»©c LaTeX:
$$
NIM = \frac{\text{Interest Income} + \text{Interest Expense}}{\text{Earning Assets}} \times 4 \times 100
$$

â€¢ LÆ°u Ã½ quan trá»ng:
  âš ï¸ Interest Expense tá»« API lÃ  Sá» Ã‚M, nÃªn dÃ¹ng Cá»˜NG (+) thay vÃ¬ trá»« (-)

  VÃ­ dá»¥:
    Interest Income = +100 tá»·
    Interest Expense = -40 tá»·  (Ã¢m)
    â†’ Net Interest = 100 + (-40) = 60 tá»·

â€¢ Field names tá»« vnstock API:
  - Interest Income: "Interest and Similar Income" (Income Statement)
  - Interest Expense: "Interest and Similar Expenses" (Income Statement - Ã‚M)
  - Earning Assets: Sá»­ dá»¥ng "TOTAL ASSETS (Bn. VND)" lÃ m proxy

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Láº¥y Interest Income (dÆ°Æ¡ng)
  2. Láº¥y Interest Expense (Ã¢m)
  3. Cá»™ng láº¡i â†’ Net Interest Income = Income + Expense (vÃ¬ Expense Ã¢m)
  4. Chia cho Earning Assets (dÃ¹ng Total Assets)
  5. NhÃ¢n 4: Annualize
  6. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm hÃ ng nÄƒm)

â€¢ Direction: Higher is better

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Quarterly â†’ Annualized
  - TÃ­nh theo tá»«ng quÃ½
  - Earning Assets = Total Assets (simplified assumption)

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input:
    Interest Income Q1 2024 = 15,000 tá»· VND
    Interest Expense Q1 2024 = -8,000 tá»· VND
    Total Assets Q1 2024 = 800,000 tá»· VND

  Calculation:
    Net Interest = 15,000 + (-8,000) = 7,000 tá»·
    NIM = (7,000 / 800,000) Ã— 4 Ã— 100
        = 0.00875 Ã— 4 Ã— 100
        = 0.035 Ã— 100
        = 3.5%

â€¢ Code Python:
```python
net_interest = interest_income + interest_expense  # expense is negative
nim = (net_interest / total_assets * 4 * 100).round(2)
```


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 2: ASSET QUALITY (CHáº¤T LÆ¯á»¢NG TÃ€I Sáº¢N) - 1 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. CREDIT COST (Chi PhÃ­ TÃ­n Dá»¥ng / Dá»± PhÃ²ng Rá»§i Ro)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Tá»· lá»‡ chi phÃ­ dá»± phÃ²ng rá»§i ro tÃ­n dá»¥ng trÃªn tá»•ng dÆ° ná»£ cho vay

â€¢ CÃ´ng thá»©c LaTeX:
$$
\text{Credit Cost} = \frac{|\text{Provision Expense}|}{\text{Total Loans}} \times 4 \times 100
$$

â€¢ LÆ°u Ã½ quan trá»ng:
  âš ï¸ Provision Expense tá»« API lÃ  Sá» Ã‚M
  â†’ Cáº§n láº¥y ABS() Ä‘á»ƒ chuyá»ƒn thÃ nh sá»‘ dÆ°Æ¡ng trÆ°á»›c khi tÃ­nh

â€¢ Field names tá»« vnstock API:
  - Provision: "Provision for credit losses" (Income Statement - Ã‚M)
  - Total Loans: "Loans and advances to customers, net" (Balance Sheet)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Láº¥y Provision for credit losses (Ã¢m)
  2. Chuyá»ƒn thÃ nh sá»‘ dÆ°Æ¡ng: abs(provision)
  3. Chia cho Total Loans
  4. NhÃ¢n 4: Annualize
  5. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm hÃ ng nÄƒm)

â€¢ Direction: Lower is better (CÃ ng tháº¥p cÃ ng tá»‘t - cháº¥t lÆ°á»£ng tÃ i sáº£n tá»‘t)

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Quarterly â†’ Annualized
  - Provision lÃ  flow (dÃ²ng chi phÃ­ trong quÃ½)
  - Total Loans lÃ  stock (sá»‘ dÆ° cuá»‘i quÃ½)

â€¢ Ã nghÄ©a:
  - Credit Cost tháº¥p â†’ Cháº¥t lÆ°á»£ng tÃ i sáº£n tá»‘t, Ã­t ná»£ xáº¥u
  - Credit Cost cao â†’ Nhiá»u ná»£ xáº¥u, pháº£i trÃ­ch láº­p dá»± phÃ²ng nhiá»u

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input:
    Provision Expense Q1 2024 = -1,200 tá»· VND (Ã¢m)
    Total Loans Q1 2024 = 600,000 tá»· VND

  Calculation:
    Provision (abs) = |-1,200| = 1,200 tá»·
    Credit Cost = (1,200 / 600,000) Ã— 4 Ã— 100
                = 0.002 Ã— 4 Ã— 100
                = 0.008 Ã— 100
                = 0.8%

â€¢ Code Python:
```python
provision = safe_get(merged, 'Provision for credit losses', 0).abs()
credit_cost = (provision / total_loans * 4 * 100).round(2)
```


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 3: GROWTH (TÄ‚NG TRÆ¯á»NG) - 3 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. NET PROFIT YoY (TÄƒng TrÆ°á»Ÿng Lá»£i Nhuáº­n CÃ¹ng Ká»³ NÄƒm TrÆ°á»›c)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng lá»£i nhuáº­n so vá»›i cÃ¹ng quÃ½ nÄƒm trÆ°á»›c

â€¢ CÃ´ng thá»©c LaTeX (YoY Growth):
$$
\text{Net Profit YoY} = \frac{\text{Net Profit}_{t} - \text{Net Profit}_{t-4}}{\text{Net Profit}_{t-4}} \times 100
$$

â€¢ Trong Ä‘Ã³:
  - t: QuÃ½ hiá»‡n táº¡i (VD: Q1 2024)
  - t-4: QuÃ½ cÃ¹ng ká»³ nÄƒm trÆ°á»›c (VD: Q1 2023)
  - LÃ¹i 4 quarters = 1 nÄƒm

â€¢ Field names tá»« vnstock API:
  - Net Profit: "Net Profit For the Year" (Income Statement)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Sáº¯p xáº¿p dá»¯ liá»‡u theo (year, quarter) descending
     â†’ Row 0 = Q1 2024, Row 4 = Q1 2023

  2. Sá»­ dá»¥ng pandas pct_change(periods=4):
     - Tá»± Ä‘á»™ng láº¥y giÃ¡ trá»‹ hiá»‡n táº¡i trá»« giÃ¡ trá»‹ 4 periods trÆ°á»›c
     - Chia cho giÃ¡ trá»‹ 4 periods trÆ°á»›c
     - NhÃ¢n 100 Ä‘á»ƒ ra %

  3. 4 quarters trÆ°á»›c = Same quarter last year (YoY)

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Higher is better

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - âš ï¸ Cáº¦N ÃT NHáº¤T 5 QUARTERS dá»¯ liá»‡u Ä‘á»ƒ tÃ­nh YoY
    (4 quarters lá»‹ch sá»­ + 1 quarter hiá»‡n táº¡i)
  - 4 quarters Ä‘áº§u tiÃªn sáº½ cÃ³ giÃ¡ trá»‹ NaN (khÃ´ng Ä‘á»§ dá»¯ liá»‡u)
  - YoY KHÃ”NG annualize (Ä‘Ã£ lÃ  % growth rá»“i)

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input (sorted descending):
    Row 0: Q1 2024, Net Profit = 5,500 tá»·
    Row 1: Q4 2023, Net Profit = 5,200 tá»·
    Row 2: Q3 2023, Net Profit = 4,800 tá»·
    Row 3: Q2 2023, Net Profit = 4,900 tá»·
    Row 4: Q1 2023, Net Profit = 5,000 tá»·  â† CÃ¹ng quÃ½ nÄƒm trÆ°á»›c

  Calculation for Row 0 (Q1 2024):
    YoY = (5,500 - 5,000) / 5,000 Ã— 100
        = 500 / 5,000 Ã— 100
        = 0.1 Ã— 100
        = 10%

â€¢ Code Python:
```python
# After sorting by (year, quarter) descending
net_profit_yoy = net_profit.pct_change(periods=4).mul(100).round(2)
```

â€¢ LÆ°u Ã½:
  - pct_change(4) tá»± Ä‘á»™ng tÃ­nh: (current - lag4) / lag4
  - Multiplying by 100 chuyá»ƒn thÃ nh %
  - Lag 4 trong quarterly data = 1 year


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. LOAN GROWTH YoY (TÄƒng TrÆ°á»Ÿng DÆ° Ná»£ Cho Vay)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng dÆ° ná»£ cho vay so vá»›i cÃ¹ng quÃ½ nÄƒm trÆ°á»›c

â€¢ CÃ´ng thá»©c LaTeX:
$$
\text{Loan Growth YoY} = \frac{\text{Total Loans}_{t} - \text{Total Loans}_{t-4}}{\text{Total Loans}_{t-4}} \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Total Loans: "Loans and advances to customers, net" (Balance Sheet)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Láº¥y Total Loans cuá»‘i quÃ½ hiá»‡n táº¡i (t)
  2. Láº¥y Total Loans cuá»‘i cÃ¹ng quÃ½ nÄƒm trÆ°á»›c (t-4)
  3. TÃ­nh % thay Ä‘á»•i = (t - t-4) / t-4 Ã— 100

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Higher is better (thÆ°á»ng)

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Balance Sheet item (sá»‘ dÆ° cuá»‘i ká»³)
  - YoY growth, KHÃ”NG annualize
  - Cáº§n Ã­t nháº¥t 5 quarters

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input:
    Q1 2024: Total Loans = 620,000 tá»· VND
    Q1 2023: Total Loans = 600,000 tá»· VND

  Calculation:
    Loan Growth = (620,000 - 600,000) / 600,000 Ã— 100
                = 20,000 / 600,000 Ã— 100
                = 0.0333 Ã— 100
                = 3.33%

â€¢ Code Python:
```python
loan_growth = total_loans.pct_change(periods=4).mul(100).round(2)
```


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. OPERATING INCOME YoY (TÄƒng TrÆ°á»Ÿng Thu Nháº­p Hoáº¡t Äá»™ng)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng thu nháº­p hoáº¡t Ä‘á»™ng so vá»›i cÃ¹ng quÃ½ nÄƒm trÆ°á»›c

â€¢ CÃ´ng thá»©c LaTeX:
$$
\text{Operating Income YoY} = \frac{\text{Operating Income}_{t} - \text{Operating Income}_{t-4}}{\text{Operating Income}_{t-4}} \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Operating Income: "Total operating revenue" (Income Statement)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Operating Income bao gá»“m:
     - Net Interest Income
     - Fee Income
     - Other operating income
  2. So sÃ¡nh vá»›i cÃ¹ng quÃ½ nÄƒm trÆ°á»›c
  3. TÃ­nh % thay Ä‘á»•i

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Higher is better

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Income Statement item (flow trong quÃ½)
  - YoY growth, KHÃ”NG annualize
  - Cáº§n Ã­t nháº¥t 5 quarters

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input:
    Q1 2024: Operating Income = 18,000 tá»· VND
    Q1 2023: Operating Income = 16,500 tá»· VND

  Calculation:
    Operating Income YoY = (18,000 - 16,500) / 16,500 Ã— 100
                         = 1,500 / 16,500 Ã— 100
                         = 0.0909 Ã— 100
                         = 9.09%

â€¢ Code Python:
```python
operating_income_yoy = operating_income.pct_change(periods=4).mul(100).round(2)
```


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 4: EFFICIENCY (HIá»†U QUáº¢ HOáº T Äá»˜NG) - 1 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. CIR (Cost-to-Income Ratio) - Tá»· Lá»‡ Chi PhÃ­ TrÃªn Thu Nháº­p            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng hiá»‡u quáº£ chi phÃ­ - bao nhiÃªu chi phÃ­ Ä‘á»ƒ táº¡o ra 1 Ä‘á»“ng thu nháº­p

â€¢ CÃ´ng thá»©c LaTeX:
$$
CIR = \frac{\text{Operating Expense}}{\text{Operating Income}} \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Operating Expense: "General & Admin Expenses" (Income Statement)
  - Operating Income: "Total operating revenue" (Income Statement)

â€¢ LÆ°u Ã½ quan trá»ng:
  âš ï¸ Operating Expense tá»« API cÃ³ thá»ƒ lÃ  Sá» Ã‚M
  â†’ Cáº§n láº¥y abs() Ä‘á»ƒ chuyá»ƒn thÃ nh sá»‘ dÆ°Æ¡ng

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Operating Expense: Chi phÃ­ hoáº¡t Ä‘á»™ng trong quÃ½
     - LÆ°Æ¡ng nhÃ¢n viÃªn
     - Chi phÃ­ vÄƒn phÃ²ng
     - Kháº¥u hao
  2. Operating Income: Tá»•ng thu nháº­p hoáº¡t Ä‘á»™ng trong quÃ½
  3. Chia Operating Expense / Operating Income
  4. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Lower is better (CÃ ng tháº¥p cÃ ng hiá»‡u quáº£)

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Quarterly ratio (tá»· lá»‡ trong quÃ½)
  - KHÃ”NG annualize (lÃ  ratio tá»©c thá»i)
  - Cáº£ tá»­ vÃ  máº«u Ä‘á»u lÃ  flow (dÃ²ng trong quÃ½)

â€¢ Ã nghÄ©a:
  - CIR = 40% â†’ Chi 40 Ä‘á»“ng Ä‘á»ƒ kiáº¿m 100 Ä‘á»“ng thu nháº­p
  - CIR tháº¥p â†’ NgÃ¢n hÃ ng hoáº¡t Ä‘á»™ng hiá»‡u quáº£
  - CIR cao â†’ NgÃ¢n hÃ ng tá»‘n kÃ©m, kÃ©m hiá»‡u quáº£

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input Q1 2024:
    Operating Expense = 7,000 tá»· VND (hoáº·c -7,000)
    Operating Income = 18,000 tá»· VND

  Calculation:
    Operating Expense (abs) = |7,000| = 7,000 tá»·
    CIR = (7,000 / 18,000) Ã— 100
        = 0.3889 Ã— 100
        = 38.89%

â€¢ Code Python:
```python
operating_expense = safe_get(merged, 'General & Admin Expenses', 0).abs()
cir = (operating_expense / operating_income * 100).round(2)
```


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 5: CAPITAL & LIQUIDITY (Vá»N VÃ€ THANH KHOáº¢N) - 2 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. EQUITY/ASSETS (Tá»· Lá»‡ Vá»‘n Chá»§ Sá»Ÿ Há»¯u TrÃªn Tá»•ng TÃ i Sáº£n)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng Ä‘Ã²n báº©y tÃ i chÃ­nh vÃ  an toÃ n vá»‘n

â€¢ CÃ´ng thá»©c LaTeX:
$$
\text{Equity/Assets} = \frac{\text{Equity}}{\text{Total Assets}} \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Equity: "OWNER'S EQUITY(Bn.VND)" (Balance Sheet)
  - Total Assets: "TOTAL ASSETS (Bn. VND)" (Balance Sheet)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Equity: Vá»‘n chá»§ sá»Ÿ há»¯u cuá»‘i quÃ½
  2. Total Assets: Tá»•ng tÃ i sáº£n cuá»‘i quÃ½
  3. Chia Equity / Total Assets
  4. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Optimal Range (7-12%)
  - < 7%: ÄÃ²n báº©y quÃ¡ cao, rá»§i ro
  - 7-12%: Pháº¡m vi tá»‘i Æ°u
  - > 12%: Báº£o thá»§, khÃ´ng táº­n dá»¥ng Ä‘Ã²n báº©y

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Balance Sheet ratio (tá»· lá»‡ tá»©c thá»i cuá»‘i quÃ½)
  - KHÃ”NG annualize (snapshot táº¡i thá»i Ä‘iá»ƒm)
  - TÃ­nh theo tá»«ng quÃ½ Ä‘á»™c láº­p

â€¢ Ã nghÄ©a:
  - Equity/Assets cao â†’ NgÃ¢n hÃ ng an toÃ n nhÆ°ng Ã­t Ä‘Ã²n báº©y
  - Equity/Assets tháº¥p â†’ ÄÃ²n báº©y cao, rá»§i ro tÄƒng

â€¢ Ranking logic:
  âš ï¸ KhÃ¡c vá»›i metrics khÃ¡c, Equity/Assets cÃ³ OPTIMAL RANGE

  Ranking based on distance from optimal range [7, 12]:
  - GiÃ¡ trá»‹ trong range [7, 12] â†’ Distance = 0 (best rank)
  - GiÃ¡ trá»‹ ngoÃ i range â†’ Distance = min(|x - 7|, |x - 12|)

  VÃ­ dá»¥:
    Bank A: 10% â†’ Distance = 0 (trong range) â†’ Rank 1
    Bank B: 15% â†’ Distance = |15-12| = 3 â†’ Rank tháº¥p hÆ¡n
    Bank C: 5%  â†’ Distance = |5-7| = 2 â†’ Rank tháº¥p hÆ¡n

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input Q1 2024:
    Equity = 72,000 tá»· VND
    Total Assets = 800,000 tá»· VND

  Calculation:
    Equity/Assets = (72,000 / 800,000) Ã— 100
                  = 0.09 Ã— 100
                  = 9%  â†’ Trong optimal range [7, 12]

â€¢ Code Python:
```python
equity_assets = (equity / total_assets * 100).round(2)

# Ranking vá»›i optimal range
if direction == 'optimal_range' and optimal_range:
    min_opt, max_opt = optimal_range  # (7, 12)
    distances = valid_data[metric].apply(
        lambda x: 0 if min_opt <= x <= max_opt
                 else min(abs(x - min_opt), abs(x - max_opt))
    )
    ranks = distances.rank(ascending=True, method='min')
```


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. LDR (Loan-to-Deposit Ratio) - Tá»· Lá»‡ Cho Vay TrÃªn Huy Äá»™ng           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng kháº£ nÄƒng thanh khoáº£n - bao nhiÃªu % tiá»n huy Ä‘á»™ng Ä‘Æ°á»£c cho vay

â€¢ CÃ´ng thá»©c LaTeX:
$$
LDR = \frac{\text{Total Loans}}{\text{Total Deposits}} \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Total Loans: "Loans and advances to customers, net" (Balance Sheet)
  - Deposits: "Deposits from customers" (Balance Sheet)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Total Loans: DÆ° ná»£ cho vay khÃ¡ch hÃ ng cuá»‘i quÃ½ (net)
  2. Deposits: Tiá»n gá»­i khÃ¡ch hÃ ng cuá»‘i quÃ½
  3. Chia Total Loans / Deposits
  4. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Optimal Range (70-85%)
  - < 70%: Thanh khoáº£n dÆ° thá»«a, khÃ´ng hiá»‡u quáº£
  - 70-85%: Pháº¡m vi tá»‘i Æ°u
  - > 85%: Rá»§i ro thanh khoáº£n cao

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Balance Sheet ratio (tá»· lá»‡ cuá»‘i quÃ½)
  - KHÃ”NG annualize
  - Snapshot táº¡i cuá»‘i quÃ½

â€¢ Ã nghÄ©a:
  - LDR cao â†’ Cho vay nhiá»u, thanh khoáº£n tháº¥p
  - LDR tháº¥p â†’ DÆ° tiá»n máº·t, kÃ©m hiá»‡u quáº£

â€¢ Quy Ä‘á»‹nh:
  âš ï¸ NHNN Viá»‡t Nam quy Ä‘á»‹nh LDR tá»‘i Ä‘a 85-90%

â€¢ Ranking logic:
  Similar to Equity/Assets, LDR has OPTIMAL RANGE [70, 85]

  Distance from optimal:
  - Trong range [70, 85] â†’ Distance = 0 (best)
  - NgoÃ i range â†’ Distance = min(|x - 70|, |x - 85|)

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input Q1 2024:
    Total Loans = 620,000 tá»· VND
    Deposits = 750,000 tá»· VND

  Calculation:
    LDR = (620,000 / 750,000) Ã— 100
        = 0.8267 Ã— 100
        = 82.67%  â†’ Trong optimal range [70, 85]

â€¢ Code Python:
```python
ldr = (total_loans / deposits * 100).round(2)

# Ranking tÆ°Æ¡ng tá»± Equity/Assets vá»›i optimal_range
```


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 6: INCOME STRUCTURE (Cáº¤U TRÃšC THU NHáº¬P) - 1 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. FEE RATIO (Tá»· Trá»ng Thu Nháº­p PhÃ­)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng Ä‘a dáº¡ng hÃ³a thu nháº­p - tá»· trá»ng thu nháº­p tá»« phÃ­ dá»‹ch vá»¥

â€¢ CÃ´ng thá»©c LaTeX:
$$
\text{Fee Ratio} = \frac{\text{Fee Income}}{\text{Total Operating Income}} \times 100
$$

â€¢ Field names tá»« vnstock API:
  - Fee Income: "Net Fee and Commission Income" (Income Statement)
  - Operating Income: "Total operating revenue" (Income Statement)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Fee Income: Thu nháº­p tá»« phÃ­ dá»‹ch vá»¥ trong quÃ½
     - PhÃ­ chuyá»ƒn tiá»n
     - PhÃ­ tháº»
     - PhÃ­ tÆ° váº¥n
     - PhÃ­ bancassurance
  2. Operating Income: Tá»•ng thu nháº­p hoáº¡t Ä‘á»™ng
  3. Chia Fee Income / Operating Income
  4. NhÃ¢n 100: Chuyá»ƒn sang %

â€¢ ÄÆ¡n vá»‹: % (pháº§n trÄƒm)

â€¢ Direction: Higher is better (Ä‘a dáº¡ng hÃ³a thu nháº­p)

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Income Statement ratio (tá»· lá»‡ trong quÃ½)
  - KHÃ”NG annualize
  - Cáº£ tá»­ vÃ  máº«u Ä‘á»u lÃ  flow

â€¢ Ã nghÄ©a:
  - Fee Ratio cao â†’ Thu nháº­p Ä‘a dáº¡ng, Ã­t phá»¥ thuá»™c lÃ£i suáº¥t
  - Fee Ratio tháº¥p â†’ Phá»¥ thuá»™c chá»§ yáº¿u vÃ o NIM

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input Q1 2024:
    Fee Income = 2,500 tá»· VND
    Operating Income = 18,000 tá»· VND

  Calculation:
    Fee Ratio = (2,500 / 18,000) Ã— 100
              = 0.1389 Ã— 100
              = 13.89%

â€¢ Code Python:
```python
fee_ratio = (fee_income / operating_income * 100).round(2)
```


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NHÃ“M 7: CASHFLOW QUALITY (CHáº¤T LÆ¯á»¢NG DÃ’NG TIá»€N) - 1 chá»‰ sá»‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. OCF/NET PROFIT (DÃ²ng Tiá»n Hoáº¡t Äá»™ng TrÃªn Lá»£i Nhuáº­n)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Äá»‹nh nghÄ©a: Äo lÆ°á»ng cháº¥t lÆ°á»£ng lá»£i nhuáº­n - lá»£i nhuáº­n cÃ³ Ä‘Æ°á»£c chuyá»ƒn thÃ nh tiá»n máº·t khÃ´ng

â€¢ CÃ´ng thá»©c LaTeX:
$$
\text{OCF/Net Profit} = \frac{\text{Operating Cash Flow}}{\text{Net Profit}}
$$

â€¢ Field names tá»« vnstock API:
  - OCF: "Cash flows from Operating Activities" (Cash Flow Statement)
  - Net Profit: "Net Profit For the Year" (Income Statement)

â€¢ Giáº£i thÃ­ch chi tiáº¿t:
  1. Operating Cash Flow: DÃ²ng tiá»n thuáº§n tá»« HÄKD trong quÃ½
  2. Net Profit: Lá»£i nhuáº­n sau thuáº¿ trong quÃ½
  3. Chia OCF / Net Profit
  4. KHÃ”NG nhÃ¢n 100 (lÃ  ratio, khÃ´ng pháº£i %)

â€¢ ÄÆ¡n vá»‹: ratio (tá»· sá»‘, khÃ´ng cÃ³ Ä‘Æ¡n vá»‹)

â€¢ Direction: Higher is better

â€¢ TÃ­nh cháº¥t dá»¯ liá»‡u:
  - Quarterly ratio
  - KHÃ”NG annualize
  - CÃ³ thá»ƒ > 1 hoáº·c < 1

â€¢ Ã nghÄ©a:
  - OCF/Net Profit > 1 â†’ Lá»£i nhuáº­n Ä‘Æ°á»£c thu vá» báº±ng tiá»n, cháº¥t lÆ°á»£ng cao
  - OCF/Net Profit < 1 â†’ Lá»£i nhuáº­n chÆ°a thu vá», cháº¥t lÆ°á»£ng tháº¥p
  - OCF/Net Profit Ã¢m â†’ Lá»— dÃ²ng tiá»n, cáº£nh bÃ¡o Ä‘á»

â€¢ LÆ°u Ã½:
  âš ï¸ Náº¿u Net Profit = 0 hoáº·c Ã¢m â†’ OCF/Net Profit = NaN
  â†’ Thay 0 báº±ng NaN trong calculation Ä‘á»ƒ trÃ¡nh division by zero

â€¢ VÃ­ dá»¥ tÃ­nh toÃ¡n:
  Input Q1 2024:
    OCF = 6,200 tá»· VND
    Net Profit = 5,000 tá»· VND

  Calculation:
    OCF/Net Profit = 6,200 / 5,000
                   = 1.24

    Giáº£i thÃ­ch: 1.24 nghÄ©a lÃ  1 Ä‘á»“ng lá»£i nhuáº­n táº¡o ra 1.24 Ä‘á»“ng tiá»n máº·t

â€¢ Code Python:
```python
ocf_net_profit = (ocf / net_profit.replace(0, np.nan)).round(2)
```


================================================================================
PHáº¦N 3: CROSS-SECTIONAL RANKING (Xáº¾P Háº NG CROSS-SECTIONAL)
================================================================================

3.1. NGUYÃŠN Táº®C RANKING
-----------------------

Ranking Ä‘Æ°á»£c thá»±c hiá»‡n CROSS-SECTIONAL theo tá»«ng quÃ½:
- Táº¡i má»—i date (VD: Q1 2024), xáº¿p háº¡ng 17 ngÃ¢n hÃ ng vá»›i nhau
- Rank 1 = Best, Rank 17 = Worst
- KhÃ´ng so sÃ¡nh cross-time (khÃ´ng so sÃ¡nh Q1 2024 vá»›i Q4 2023)

3.2. RANKING DIRECTION
---------------------

A) HIGHER IS BETTER (8 metrics):
   Metrics: ROA, NIM, Net Profit YoY, Loan Growth, Operating Income YoY, Fee Ratio, OCF/Net Profit

   Logic:
   $$
   \text{Rank} = \text{rank}(\text{metric}, \text{ascending}=\text{False})
   $$

   VÃ­ dá»¥:
     VCB: ROA = 2.5% â†’ Rank 1 (cao nháº¥t)
     TCB: ROA = 2.3% â†’ Rank 2
     ACB: ROA = 1.8% â†’ Rank 8
     ...
     EIB: ROA = 0.8% â†’ Rank 17 (tháº¥p nháº¥t)

B) LOWER IS BETTER (2 metrics):
   Metrics: Credit Cost, CIR

   Logic:
   $$
   \text{Rank} = \text{rank}(\text{metric}, \text{ascending}=\text{True})
   $$

   VÃ­ dá»¥:
     VCB: Credit Cost = 0.5% â†’ Rank 1 (tháº¥p nháº¥t, tá»‘t nháº¥t)
     TCB: Credit Cost = 0.7% â†’ Rank 4
     ACB: Credit Cost = 1.2% â†’ Rank 12
     ...
     EIB: Credit Cost = 2.0% â†’ Rank 17 (cao nháº¥t, tá»‡ nháº¥t)

C) OPTIMAL RANGE (2 metrics):
   Metrics: Equity/Assets [7-12%], LDR [70-85%]

   Logic:
   $$
   \text{Distance} =
   \begin{cases}
   0 & \text{if } x \in [\text{min}, \text{max}] \\
   \min(|x - \text{min}|, |x - \text{max}|) & \text{otherwise}
   \end{cases}
   $$

   $$
   \text{Rank} = \text{rank}(\text{Distance}, \text{ascending}=\text{True})
   $$

   VÃ­ dá»¥ Equity/Assets vá»›i optimal [7, 12]:
     VCB: 9%  â†’ Distance = 0 â†’ Rank 1 (trong range)
     TCB: 10% â†’ Distance = 0 â†’ Rank 1 (trong range)
     ACB: 8%  â†’ Distance = 0 â†’ Rank 1 (trong range)
     MBB: 15% â†’ Distance = 3 â†’ Rank 12 (xa range)
     VPB: 5%  â†’ Distance = 2 â†’ Rank 8 (xa range)

3.3. PERCENTILE CALCULATION
---------------------------

Percentile Ä‘o lÆ°á»ng vá»‹ trÃ­ tÆ°Æ¡ng Ä‘á»‘i trong nhÃ³m (0-100%):

$$
\text{Percentile} = \frac{n - \text{Rank} + 1}{n} \times 100
$$

Trong Ä‘Ã³:
- n = sá»‘ ngÃ¢n hÃ ng cÃ³ dá»¯ liá»‡u (thÆ°á»ng lÃ  17)
- Rank = thá»© háº¡ng (1 = best)

VÃ­ dá»¥ vá»›i n = 17:
  Rank 1  â†’ Percentile = (17-1+1)/17 Ã— 100 = 100% (top)
  Rank 2  â†’ Percentile = (17-2+1)/17 Ã— 100 = 94.1%
  Rank 9  â†’ Percentile = (17-9+1)/17 Ã— 100 = 52.9%
  Rank 17 â†’ Percentile = (17-17+1)/17 Ã— 100 = 5.9% (bottom)

3.4. QUINTILE ASSIGNMENT
------------------------

Chia 17 ngÃ¢n hÃ ng thÃ nh 5 nhÃ³m dá»±a trÃªn Rank:

$$
\text{Quintile} = \text{qcut}(\text{Rank}, q=5, \text{labels}=[1,2,3,4,5])
$$

- Q1 (Quintile 1) = Best performers (Rank 1-3)
- Q2 (Quintile 2) = Above average (Rank 4-6)
- Q3 (Quintile 3) = Average (Rank 7-11)
- Q4 (Quintile 4) = Below average (Rank 12-14)
- Q5 (Quintile 5) = Worst performers (Rank 15-17)

âš ï¸ LÆ°u Ã½: Khi cÃ³ ties (giÃ¡ trá»‹ báº±ng nhau), pandas qcut cÃ³ thá»ƒ drop duplicates

Code:
```python
quintiles = pd.qcut(ranks, q=5, labels=[1,2,3,4,5], duplicates='drop')
```


================================================================================
PHáº¦N 4: FORWARD RETURNS (Lá»¢I NHUáº¬N TÆ¯Æ NG LAI)
================================================================================

4.1. FORWARD RETURN CALCULATION
-------------------------------

Forward return Ä‘o lÆ°á»ng lá»£i nhuáº­n cá»• phiáº¿u sau N ngÃ y ká»ƒ tá»« ngÃ y cÃ´ng bá»‘ BCTC.

CÃ´ng thá»©c LaTeX:
$$
\text{Forward Return}_{N} = \frac{P_{t+N} - P_t}{P_t} \times 100
$$

Trong Ä‘Ã³:
- $P_t$: GiÃ¡ Ä‘Ã³ng cá»­a táº¡i ngÃ y cÃ´ng bá»‘ BCTC (hoáº·c ngÃ y gáº§n nháº¥t)
- $P_{t+N}$: GiÃ¡ Ä‘Ã³ng cá»­a sau N ngÃ y giao dá»‹ch
- N: Forward period (5, 10, 20, 30 days)

4.2. IMPLEMENTATION LOGIC
-------------------------

1. Merge ranking data vá»›i price data theo ticker
2. Vá»›i má»—i row (ticker + date):
   a. TÃ¬m giÃ¡ hiá»‡n táº¡i táº¡i date
   b. TÃ¬m giÃ¡ tÆ°Æ¡ng lai sau N ngÃ y giao dá»‹ch
   c. TÃ­nh % return

3. LÆ°u Ã½:
   - Sá»­ dá»¥ng trading days (ngÃ y giao dá»‹ch), khÃ´ng pháº£i calendar days
   - Náº¿u khÃ´ng Ä‘á»§ N ngÃ y trong future â†’ Return = NaN
   - Price Ä‘Æ°á»£c forward-fill tá»« daily data

4.3. FORWARD PERIODS
-------------------

Standard periods:
- 5d: 1 tuáº§n giao dá»‹ch
- 10d: 2 tuáº§n giao dá»‹ch
- 20d: 1 thÃ¡ng giao dá»‹ch
- 30d: 1.5 thÃ¡ng giao dá»‹ch

4.4. EXAMPLE
-----------

Input:
  Ticker: VCB
  BCTC Date: 2024-04-15 (Q1 2024)
  Price at 2024-04-15: 90,000 VND
  Price at 2024-05-10 (20 days later): 95,000 VND

Calculation:
  Fwd Return 20d = (95,000 - 90,000) / 90,000 Ã— 100
                 = 5,000 / 90,000 Ã— 100
                 = 5.56%

Code:
```python
for period in [5, 10, 20, 30]:
    future_dates = prices.index[prices.index > date]
    future_date = future_dates[min(period - 1, len(future_dates) - 1)]

    current_price = prices[date]
    future_price = prices[future_date]

    fwd_return = (future_price / current_price - 1) * 100
```


================================================================================
PHáº¦N 5: QUINTILE PERFORMANCE ANALYSIS
================================================================================

5.1. Má»¤C ÄÃCH
------------

PhÃ¢n tÃ­ch hiá»‡u suáº¥t Ä‘áº§u tÆ° theo quintile:
- Q1 (best metrics) cÃ³ outperform Q5 (worst metrics) khÃ´ng?
- Ranking cÃ³ predictive power khÃ´ng?

5.2. ANALYSIS METRICS
--------------------

Cho má»—i Quintile, tÃ­nh:

A) Mean Forward Return:
$$
\bar{R}_q = \frac{1}{n_q} \sum_{i \in Q_q} R_i
$$

B) Median Forward Return:
$$
\tilde{R}_q = \text{median}(\{R_i : i \in Q_q\})
$$

C) Standard Deviation:
$$
\sigma_q = \sqrt{\frac{1}{n_q-1} \sum_{i \in Q_q} (R_i - \bar{R}_q)^2}
$$

D) Min and Max Returns

5.3. STATISTICAL TESTS
----------------------

A) T-test (Q1 vs Q5):
   Test if mean return of Q1 > Q5

   Hypotheses:
   - H0: Î¼_Q1 = Î¼_Q5
   - H1: Î¼_Q1 â‰  Î¼_Q5

   Test statistic:
   $$
   t = \frac{\bar{R}_{Q1} - \bar{R}_{Q5}}{\sqrt{\frac{s^2_{Q1}}{n_{Q1}} + \frac{s^2_{Q5}}{n_{Q5}}}}
   $$

   P-value < 0.05 â†’ Significant difference

B) Information Coefficient (IC):
   Spearman correlation between metric rank and forward return

   $$
   IC = \rho_{\text{Spearman}}(\text{Metric}, \text{Forward Return})
   $$

   Interpretation:
   - |IC| > 0.05: CÃ³ Ã½ nghÄ©a kinh táº¿
   - |IC| > 0.10: Predictive power máº¡nh
   - P-value < 0.05: CÃ³ Ã½ nghÄ©a thá»‘ng kÃª


================================================================================
PHáº¦N 6: KIá»‚M TRA Dá»® LIá»†U TRONG EXCEL
================================================================================

6.1. STRUCTURE CHECK
-------------------

File: data/bank_financials.xlsx

1. Kiá»ƒm tra sheets:
   - Pháº£i cÃ³ 17 sheets (1 sheet per bank)
   - TÃªn sheet = Ticker code (VCB, TCB, MBB, ...)

2. Kiá»ƒm tra columns trong má»—i sheet:
   - ticker
   - year
   - quarter
   - roa
   - nim
   - credit_cost
   - net_profit_yoy
   - loan_growth
   - operating_income_yoy
   - cir
   - equity_assets
   - ldr
   - fee_ratio
   - ocf_net_profit

3. Kiá»ƒm tra sá»‘ quarters:
   - Má»—i sheet pháº£i cÃ³ ~8 rows (8 quarters)
   - Sorted descending: Q1 2024, Q4 2023, Q3 2023, ...

6.2. DATA VALIDATION
-------------------

Cho má»—i metric, kiá»ƒm tra:

A) Value Range Check:
   - ROA: 0.5% - 3% (reasonable for Vietnam banks)
   - NIM: 2% - 5%
   - Credit Cost: 0.3% - 2%
   - YoY Growth: -50% to +100%
   - CIR: 30% - 60%
   - Equity/Assets: 5% - 15%
   - LDR: 60% - 95%
   - Fee Ratio: 5% - 30%
   - OCF/Net Profit: -5 to +5

B) NaN Check:
   - 4 quarters Ä‘áº§u cá»§a YoY metrics pháº£i lÃ  NaN
   - CÃ¡c metrics khÃ¡c khÃ´ng nÃªn cÃ³ quÃ¡ nhiá»u NaN

C) Extreme Values:
   - Náº¿u giÃ¡ trá»‹ quÃ¡ cao/tháº¥p báº¥t thÆ°á»ng â†’ Review

6.3. MANUAL CALCULATION EXAMPLE (VCB Q1 2024)
---------------------------------------------

Äá»ƒ kiá»ƒm tra, báº¡n cÃ³ thá»ƒ láº¥y raw data tá»« vnstock vÃ  tÃ­nh tay:

Step 1: Fetch raw data
```
from vnstock import Vnstock
st = Vnstock().stock("VCB", source="VCI")

is_df = st.finance.income_statement(period='quarter', lang='en')
bs_df = st.finance.balance_sheet(period='quarter', lang='en')
cf_df = st.finance.cash_flow(period='quarter')
```

Step 2: Extract fields (Q1 2024 = latest row)
```
net_profit = is_df['Net Profit For the Year'].iloc[0]
total_assets = bs_df['TOTAL ASSETS (Bn. VND)'].iloc[0]
interest_income = is_df['Interest and Similar Income'].iloc[0]
interest_expense = is_df['Interest and Similar Expenses'].iloc[0]
...
```

Step 3: Calculate metrics theo cÃ´ng thá»©c á»Ÿ Pháº§n 2

Step 4: So sÃ¡nh káº¿t quáº£ vá»›i file bank_financials.xlsx

6.4. EXCEL FORMULAS FOR VERIFICATION
------------------------------------

Giáº£ sá»­ data layout:
- Column A: ticker
- Column B: year
- Column C: quarter
- Column D: net_profit
- Column E: total_assets
- Column F: interest_income
- Column G: interest_expense
- ...

CÃ´ng thá»©c Excel:

A) ROA (giáº£ sá»­ row 2):
```
= (D2 / E2) * 4 * 100
```

B) NIM:
```
= ((F2 + G2) / E2) * 4 * 100
```
âš ï¸ LÆ°u Ã½: G2 lÃ  sá»‘ Ã¢m, nÃªn dÃ¹ng cá»™ng (+)

C) Credit Cost:
```
= (ABS(H2) / I2) * 4 * 100
```
Trong Ä‘Ã³ H2 = provision, I2 = total_loans

D) Net Profit YoY (row 2):
```
= IF(ROW() <= 5, "", (D2 - D6) / D6 * 100)
```
Giáº£i thÃ­ch:
- Náº¿u row <= 5: khÃ´ng Ä‘á»§ 4 quarters lá»‹ch sá»­ â†’ ""
- D6 = Net profit cá»§a row 6 (4 rows trÆ°á»›c = same quarter last year)
- (D2 - D6) / D6 * 100 = YoY growth %

E) CIR:
```
= (ABS(J2) / K2) * 100
```
J2 = operating_expense, K2 = operating_income

F) Equity/Assets:
```
= (L2 / E2) * 100
```
L2 = equity, E2 = total_assets

G) LDR:
```
= (I2 / M2) * 100
```
I2 = total_loans, M2 = deposits

H) Fee Ratio:
```
= (N2 / K2) * 100
```
N2 = fee_income, K2 = operating_income

I) OCF/Net Profit:
```
= IF(D2=0, "", O2 / D2)
```
O2 = ocf, D2 = net_profit
âš ï¸ TrÃ¡nh chia cho 0


================================================================================
PHáº¦N 7: COMMON ISSUES & TROUBLESHOOTING
================================================================================

7.1. MISSING DATA (NaN VALUES)
------------------------------

Issue: Má»™t sá»‘ metrics cÃ³ giÃ¡ trá»‹ NaN

NguyÃªn nhÃ¢n:
1. YoY metrics: 4 quarters Ä‘áº§u khÃ´ng Ä‘á»§ lá»‹ch sá»­ â†’ NaN (bÃ¬nh thÆ°á»ng)
2. Division by zero: VD: CIR khi operating_income = 0
3. API data missing: Má»™t sá»‘ quarters khÃ´ng cÃ³ Ä‘áº§y Ä‘á»§ fields

Giáº£i phÃ¡p:
- YoY NaN: OK, bá» qua
- Division by zero: Replace vá»›i NaN trong code
- API missing: Re-fetch hoáº·c skip quarter Ä‘Ã³

7.2. EXTREME VALUES
-------------------

Issue: GiÃ¡ trá»‹ quÃ¡ cao/tháº¥p báº¥t thÆ°á»ng

Examples:
- CIR > 100%: Operating expense > Operating income (ngÃ¢n hÃ ng lá»—)
- Credit Cost < 0: HoÃ n nháº­p dá»± phÃ²ng (cÃ³ thá»ƒ xáº£y ra)
- YoY growth = 500%: Base effect (nÄƒm trÆ°á»›c quÃ¡ tháº¥p)

Giáº£i phÃ¡p:
- Kiá»ƒm tra raw data tá»« API
- XÃ¡c nháº­n vá»›i BCTC cÃ´ng bá»‘ chÃ­nh thá»©c
- Náº¿u Ä‘Ãºng â†’ giá»¯ nguyÃªn, náº¿u sai â†’ investigate

7.3. INCONSISTENT QUARTERS
--------------------------

Issue: Sá»‘ quarters khÃ¡c nhau giá»¯a cÃ¡c banks

NguyÃªn nhÃ¢n:
- Má»™t sá»‘ banks cÃ³ Ã­t quarters data hÆ¡n (má»›i niÃªm yáº¿t, hoáº·c API thiáº¿u)

Giáº£i phÃ¡p:
- Accept it: Cross-sectional ranking váº«n work
- Chá»‰ cáº§n Ä‘á»§ data cho quarter Ä‘ang phÃ¢n tÃ­ch

7.4. RANKING TIES
-----------------

Issue: Nhiá»u banks cÃ³ cÃ¹ng metric value â†’ Rank báº±ng nhau

Example:
  VCB: ROA = 2.5% â†’ Rank 1
  TCB: ROA = 2.5% â†’ Rank 1 (tie)
  MBB: ROA = 2.3% â†’ Rank 3 (skip rank 2)

Giáº£i phÃ¡p:
- Code sá»­ dá»¥ng method='min' trong rank()
- Quintile assignment dÃ¹ng duplicates='drop'


================================================================================
PHáº¦N 8: SUMMARY TABLE - QUICK REFERENCE
================================================================================

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Metric            â”‚ Formula                  â”‚ Period    â”‚ Annualize?   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ 1. ROA            â”‚ NP/TA Ã— 4 Ã— 100         â”‚ Quarterly â”‚ YES (Ã—4)     â•‘
â•‘ 2. NIM            â”‚ NII/EA Ã— 4 Ã— 100        â”‚ Quarterly â”‚ YES (Ã—4)     â•‘
â•‘ 3. Credit Cost    â”‚ Prov/Loans Ã— 4 Ã— 100    â”‚ Quarterly â”‚ YES (Ã—4)     â•‘
â•‘ 4. NP YoY         â”‚ pct_change(4) Ã— 100     â”‚ YoY       â”‚ NO           â•‘
â•‘ 5. Loan Growth    â”‚ pct_change(4) Ã— 100     â”‚ YoY       â”‚ NO           â•‘
â•‘ 6. OI YoY         â”‚ pct_change(4) Ã— 100     â”‚ YoY       â”‚ NO           â•‘
â•‘ 7. CIR            â”‚ OpEx/OpInc Ã— 100        â”‚ Quarterly â”‚ NO           â•‘
â•‘ 8. Equity/Assets  â”‚ Eq/TA Ã— 100             â”‚ Quarterly â”‚ NO           â•‘
â•‘ 9. LDR            â”‚ Loans/Dep Ã— 100         â”‚ Quarterly â”‚ NO           â•‘
â•‘ 10. Fee Ratio     â”‚ Fee/OpInc Ã— 100         â”‚ Quarterly â”‚ NO           â•‘
â•‘ 11. OCF/NP        â”‚ OCF/NP                  â”‚ Quarterly â”‚ NO           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Legend:
- NP = Net Profit
- TA = Total Assets
- NII = Net Interest Income
- EA = Earning Assets (proxy: Total Assets)
- Prov = Provision Expense
- OpEx = Operating Expense
- OpInc = Operating Income
- Eq = Equity
- Dep = Deposits
- Fee = Fee Income
- OCF = Operating Cash Flow

Direction:
- â†‘ Higher is better: 1,2,4,5,6,10,11
- â†“ Lower is better: 3,7
- â—‰ Optimal range: 8 [7-12%], 9 [70-85%]


================================================================================
PHáº¦N 9: REFERENCES & RESOURCES
================================================================================

9.1. CODE FILES
--------------
- Fetch script: scripts/fetch_bank_financials.py
- Config: config/config_banking.py
- Ranking logic: analysis/ranking.py
- Ranking page: pages/7_ğŸ†_Ranking.py

9.2. DATA FILES
--------------
- Raw financials: data/bank_financials.xlsx (17 sheets)
- Price data: data/bank_*.xlsx (foreign, self, valuation)

9.3. VNSTOCK API REFERENCE
--------------------------
- Library: vnstock (Python package)
- Source: VCI (default)
- Methods:
  â€¢ st.finance.income_statement(period='quarter', lang='en')
  â€¢ st.finance.balance_sheet(period='quarter', lang='en')
  â€¢ st.finance.cash_flow(period='quarter')

9.4. FIELD MAPPING
-----------------

Income Statement Fields:
- "Net Profit For the Year"
- "Interest and Similar Income"
- "Interest and Similar Expenses"
- "Net Fee and Commission Income"
- "Total operating revenue"
- "General & Admin Expenses"
- "Provision for credit losses"

Balance Sheet Fields:
- "TOTAL ASSETS (Bn. VND)"
- "OWNER'S EQUITY(Bn.VND)"
- "Loans and advances to customers, net"
- "Deposits from customers"

Cash Flow Fields:
- "Cash flows from Operating Activities"


================================================================================
PHáº¦N 10: CHECKLIST FOR DATA VERIFICATION
================================================================================

â–¡ Step 1: Check file exists
   âœ“ data/bank_financials.xlsx exists
   âœ“ File size > 0 KB

â–¡ Step 2: Check structure
   âœ“ 17 sheets (one per bank)
   âœ“ Each sheet has 14 columns
   âœ“ Columns match expected list

â–¡ Step 3: Check data completeness
   âœ“ Each sheet has ~8 rows (quarters)
   âœ“ No completely empty columns
   âœ“ ticker, year, quarter have no NaN

â–¡ Step 4: Check metric values
   âœ“ ROA: 0.5% - 3%
   âœ“ NIM: 2% - 5%
   âœ“ Credit Cost: 0.3% - 2%
   âœ“ YoY: First 4 rows are NaN, rest have values
   âœ“ CIR: 30% - 60%
   âœ“ Equity/Assets: 5% - 15%
   âœ“ LDR: 60% - 95%
   âœ“ Fee Ratio: 5% - 30%
   âœ“ OCF/NP: -5 to +5

â–¡ Step 5: Manual spot check
   âœ“ Pick 1 bank (VD: VCB)
   âœ“ Pick 1 quarter (VD: Q1 2024)
   âœ“ Fetch raw data from vnstock
   âœ“ Calculate ROA, NIM manually
   âœ“ Compare with Excel file
   âœ“ Difference < 0.01%

â–¡ Step 6: Cross-reference with official reports
   âœ“ Download Q1 2024 BCTC from bank website
   âœ“ Compare key figures (Net Profit, Total Assets, etc.)
   âœ“ Ensure consistency

â–¡ Step 7: Ranking verification
   âœ“ Open Ranking page in Streamlit
   âœ“ Check latest ranking makes business sense
   âœ“ VCB, TCB, MBB should be top tier
   âœ“ Compare with market knowledge


================================================================================
END OF DOCUMENT
================================================================================

TÃ i liá»‡u nÃ y cung cáº¥p Ä‘áº§y Ä‘á»§ thÃ´ng tin Ä‘á»ƒ:
1. Hiá»ƒu cÃ¡ch tÃ­nh 11 chá»‰ sá»‘ tÃ i chÃ­nh ngÃ¢n hÃ ng
2. Kiá»ƒm tra láº¡i káº¿t quáº£ trong Excel
3. Debug khi cÃ³ váº¥n Ä‘á» vá» dá»¯ liá»‡u
4. Verify ranking logic

Náº¿u cÃ³ tháº¯c máº¯c vá» báº¥t ká»³ cÃ´ng thá»©c nÃ o, vui lÃ²ng tham kháº£o:
- Pháº§n 2: Chi tiáº¿t cÃ´ng thá»©c tá»«ng chá»‰ sá»‘
- Pháº§n 6: HÆ°á»›ng dáº«n kiá»ƒm tra trong Excel
- Code files trong thÆ° má»¥c scripts/ vÃ  analysis/

================================================================================
